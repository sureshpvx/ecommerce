// dropdown@0.2.0 downloaded from https://ga.jspm.io/npm:dropdown@0.2.0/index.js

var e={};var t=e&&e.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)};var n=function(){function EventEmitter(){this.events={}}EventEmitter.prototype.on=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);this.events[e].push({callback:t,thisArg:n});return this};EventEmitter.prototype.off=function(e,t){if(e in this.events){var n=this.events[e];for(var s=0,i=void 0;i=n[s];s++)if(i.callback===t){n.splice(s,1);break}}return this};EventEmitter.prototype.emit=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e in this.events){var s=this.events[e];for(var i=0,r=void 0;r=s[i];i++)r.callback.apply(r.thisArg,t)}return this};return EventEmitter}();e.EventEmitter=n;var s=function(e){t(Dropdown,e);function Dropdown(t){var n=this;e.call(this);this.input_el=t;this.results_el=document.createElement("ul");this.results_el.setAttribute("class","dropdown");this.results_el.setAttribute("style","position: absolute; display: none");this.input_el.parentNode.insertBefore(this.results_el,this.input_el.nextSibling);this.input_el.addEventListener("keydown",(function(e){return n.keydown(e)}));this.input_el.addEventListener("keyup",(function(e){return n.keyup(e)}));this.input_el.addEventListener("focus",(function(){return n.changed()}));this.input_el.addEventListener("blur",(function(){return n.reset()}))}Dropdown.prototype.keydown=function(e){if(13===e.which)e.preventDefault();else if(38==e.which){this.selected_el&&this.selected_el.previousSibling&&this.preselect(this.selected_el.previousSibling);e.preventDefault()}else if(40==e.which){e.preventDefault();this.selected_el?this.selected_el.nextSibling&&this.preselect(this.selected_el.nextSibling):this.preselect(this.results_el.firstChild)}};Dropdown.prototype.keyup=function(e){if(13===e.which){this.selected();this.reset()}else this.changed()};Dropdown.prototype.selected=function(){this.emit("select",this.selected_el.dataset["value"],this.selected_el)};Dropdown.prototype.changed=function(){var e=this.input_el.value;e!==this.query&&this.emit("change",e)};Dropdown.prototype.preselect=function(e){this.selected_el&&this.selected_el.classList.remove("selected");if(e){e.classList.add("selected");this.emit("preselect",e.dataset["value"])}this.selected_el=e};Dropdown.prototype.reset=function(){this.results_el.style.display="none";this.query=null};Dropdown.prototype.setOptions=function(e,t){var n=this;this.query=t;var s=this.results_el.cloneNode(false);s.style.display=e.length>0?"block":"none";e.forEach((function(e){var t=e.label,i=e.value;var r="string"===typeof t?document.createTextNode(t):t;var o=document.createElement("li");o.appendChild(r);o.dataset["value"]=i;o.addEventListener("mouseover",(function(){return n.preselect(o)}));o.addEventListener("mousedown",(function(){n.preselect(o);n.selected()}));s.appendChild(o)}));s.addEventListener("mouseout",(function(){return n.preselect(null)}));this.results_el.parentNode.replaceChild(s,this.results_el);this.results_el=s;this.selected_el=void 0};Dropdown.attach=function(e){return new Dropdown(e)};return Dropdown}(n);e.Dropdown=s;const i=e.EventEmitter,r=e.Dropdown;export default e;export{r as Dropdown,i as EventEmitter};

